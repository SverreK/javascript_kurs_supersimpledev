<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissors</title>
  </head>

  <body>
    <h1>Rock Paper Scissors</h1>
    <button
      onclick="

      game('Rock');

      "
    >
      Rock
    </button>

    <button
      onclick="

      game('Paper');
      "
    >
      Paper
    </button>

    <button
      onclick="

      game('Scissors');
      "
    >
      Scissors
    </button>
    <button
      onclick="
    
    alert(`The Score is: You: ${score.userScore} | Computer: ${score.machineScore}`)
    "
    >
      Score
    </button>
    <button
      onclick="
    score.machineScore = 0;
    score.userScore = 0;
    localStorage.removeItem('score');
    alert('Game reset!')
    "
    >
      Reset Game
    </button>

    <script>
      //Local storage
      const score = JSON.parse(localStorage.getItem('score')) || {
        machineScore: 0,
        userScore: 0,
      };

      /*
      boolean shortcut -> score === null -> true -> !score -> true, om score ikkje eksisterar
      if (!score) {
        score = {
          machineScore: 0,
          userScore: 0,
        };
      }
      */

      function computerMove() {
        const randomNumber = Math.random();

        if (randomNumber >= 0 && randomNumber < 1 / 3) {
          return 'Rock';
        } else if (randomNumber > 1 / 3 && randomNumber < 2 / 3) {
          return 'Paper';
        }

        return 'Scissors';
      }

      function game(userMove) {
        const machine = computerMove();
        const user = userMove;

        if (machine === user) {
          score.machineScore++;
          score.userScore++;
          alert(
            `Tie! Your score: ${score.userScore} | Machine score: ${score.machineScore}`
          );
        } else if (
          (user === 'Rock' && machine === 'Paper') ||
          (user === 'Paper' && machine === 'Scissors') ||
          (user === 'Scissors' && machine === 'Rock')
        ) {
          score.machineScore++;
          alert(
            `You lost! Your score: ${score.userScore} | Machine score: ${score.machineScore}`
          );
        } else {
          score.userScore++;
          alert(
            `You win! Your score: ${score.userScore} | Machine score: ${score.machineScore}`
          );
        }

        //Lagrer score i localStorage
        localStorage.setItem('score', JSON.stringify(score));
      }
    </script>

    <h3>Play Coin Flip!</h3>
    <p>
      <a href="08-coin-flip-game.html">Play Game!</a>
    </p>
  </body>
</html>
